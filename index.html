<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>ìˆ˜ì„±êµ¬ ê±´ê°• ì¸í”„ë¼ ì§€ë„</title>
  <style>
    #map { width: 100%; height: 600px; margin-top: 10px; }
    #controls { margin-bottom: 10px; }
    label { margin-right: 15px; }
  </style>
</head>
<body>

<h2>ğŸ™ï¸ ìˆ˜ì„±êµ¬ ê±´ê°• ì¸í”„ë¼ ì¡°íšŒ</h2>

<div id="controls">
  <label><input type="radio" name="category" value="hospital" checked> ë³‘ì›</label>
  <label><input type="radio" name="category" value="sports"> ê³µê³µì²´ìœ¡ì‹œì„¤</label>
  <label><input type="radio" name="category" value="park"> ê³µì› ë° ë…¹ì§€</label><br><br>
  <input type="text" id="address-input" placeholder="ì˜ˆ: ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ì–´ë¡œ 200" size="50">
  <button onclick="searchLocation()">ê²€ìƒ‰</button>
</div>

<div id="map"></div>
<div id="info" style="margin-top: 10px;"></div>

<script type="text/javascript" src="//dapi.kakao.com/v2/maps/sdk.js?appkey=7b52a2412601870d822f0f4be36667dd=services,geometry"></script>
<script>
  const map = new kakao.maps.Map(document.getElementById('map'), {
    center: new kakao.maps.LatLng(35.8569, 128.6314),
    level: 5
  });

  const geocoder = new kakao.maps.services.Geocoder();
  let userMarker = null;
  let markers = [];

  // ë³‘ì›, ì²´ìœ¡ì‹œì„¤, ê³µì› ë°ì´í„°
  const infraData = {
    hospital: [
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‹¬êµ¬ë²ŒëŒ€ë¡œ 3190",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‹¬êµ¬ë²ŒëŒ€ë¡œ 2656",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ëª…ë•ë¡œ 414",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™”ë‘ë¡œ 66",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ëª…ë•ë¡œ 424",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ êµ­ì±„ë³´ìƒë¡œ 830",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‹¬êµ¬ë²ŒëŒ€ë¡œ 2348",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™”ë‘ë¡œ 48",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë™ëŒ€êµ¬ë¡œ 271",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™”ë‘ë¡œ 58",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë¬´ì—´ë¡œ 5",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ëª…ë•ë¡œ 443",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‹¬êµ¬ë²ŒëŒ€ë¡œ 3119",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìˆ˜ì„±ë¡œ 194",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ì²œë™ë¡œ84ê¸¸ 21"
    ],
    sports: [
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ êµ­ì±„ë³´ìƒë¡œ 904 (ìˆ˜ì„±êµ­ë¯¼ì²´ìœ¡ì„¼í„°)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‹¬êµ¬ë²ŒëŒ€ë¡œ 2501 (ë²”ì–´ì²´ë ¥ì¸ì¦ì„¼í„°)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë¬´ì—´ë¡œ 105 (ìˆ˜ì„±í—¬ìŠ¤ì„¼í„°)"
    ],
    park: [ 
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™©ê¸ˆë™ ì‚°1 (ë²”ì–´ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ì–´ë™ ì‚°250 (ì•¼ì‹œê³¨ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œë™ 1417 (í™”ë‘ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œë™ ì‚°407-10 (ë§Œì´Œê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìˆ˜ì„±4ê°€ 1090-15 (ìˆ˜ì„±ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°ë™ 1274 (ì§€ì‚°ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼ë™ 1328-2 (ë²”ë¬¼ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 590 (ì‹ ë§¤ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹œì§€ë™ 501 (ë…¸ë³€ê³µì›)",
      "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§¤í˜¸ë™ 1321 (ë§¤í˜¸ê³µì›)",
"ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™©ê¸ˆë™ ì‚°1 (ë²”ì–´ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ì–´ë™ ì‚°250 (ì•¼ì‹œê³¨ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œë™ 1417 (í™”ë‘ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œë™ ì‚°407-10 (ë§Œì´Œê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìˆ˜ì„±4ê°€ 1090-15 (ìˆ˜ì„±ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°ë™ 1274 (ì§€ì‚°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼ë™ 1328-2 (ë²”ë¬¼ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 590 (ì‹ ë§¤ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹œì§€ë™ 501 (ë…¸ë³€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§¤í˜¸ë™ 1321 (ë§¤í˜¸ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë…¸ë³€ë™ 741 (ì•ŒíŒŒì‹œí‹°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìš±ìˆ˜ë™ (ëŒ€êµ¬ëŒ€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìš±ìˆ˜ë™ (ëŒ€êµ¬ì²´ìœ¡ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ì–´2ë™ 416-9 (ê³„ë¦¼ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ì–´3ë™ 966-2 (ë²”ì–´ì¬ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ1ë™ 656-3 (ìƒ›ë³„ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ2ë™ 1006-2 (ì²­êµ¬ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ2ë™ 1017-2 (ë™ì›ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ2ë™ 1023-11 (ê´‘ëª…ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ2ë™ 991-8 (ë¬´ì—´ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ3ë™ 852 (êµ­í™”ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ3ë™ 862 (ì§„ë‹¬ë˜ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ3ë™ 870-13 (ë§Œì´Œê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ3ë™ 874-2 (ë´‰ì„ í™”ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§Œì´Œ3ë™ 1496 (ë¯¼ë“¤ë ˆê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìˆ˜ì„±ë™3ê°€ 130-2 (ìƒˆë§ˆì„ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìˆ˜ì„±ë™3ê°€ 216 (ìˆ˜ì„±ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìˆ˜ì„±4ê°€ë™ 1009-2 (í˜¸ëŒì´ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™©ê¸ˆ2ë™ 750 (ë™ì‹ ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™©ê¸ˆ2ë™ 721 (ìˆ˜ëª©ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™©ê¸ˆ2ë™ 802 (í™©ê¸ˆê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ í™©ê¸ˆ2ë™ 882-2 (ëŒ€ê²½ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì¤‘ë™ 12 (ë¬´ê¶í™”ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì¤‘ë™ 127 (ìƒë¡ìˆ˜ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì¤‘ë™ 171 (ì¤‘ë™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 17 (í¬ë§ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 54 (ì²­ì†Œë…„ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 343 (ë“¤ì•ˆê¸¸ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 400-1 (ë•í™”ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 41 (ìƒ›í„°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 141 (ì•„ë«ë§ˆì„ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 155 (ëë™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 741-7 (ë§ë«¼ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 31-7 (ë“¤ì•ˆê¸¸ê¿ˆë‚˜ë¬´ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°1ë™ 1013 (ì§€ì‚°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°1ë™ 1265 (ì„¸ê°ë‹¨ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°1ë™ 1293 (ë¬´í•™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°1ë™ 1287 (ì§€ë´‰ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°1ë™ 1280 (ìˆ˜ë™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°2ë™ 1184-5 (í˜„ëŒ€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°2ë™ 1211-2 (ê±°ì„±ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°2ë™ 1272-1 (ì—ë´ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°2ë™ 1247 (ì²­ì‚°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì§€ì‚°2ë™ 1256 (í™”ì„±ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼1ë™ 1279-3 (ë³´ì„±ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼1ë™ 1283-2 (ìš©ì§€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼1ë™ 1288-2 (ë§ˆì‚°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼1ë™ 1302 (ë°°ìˆ˜ì§€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼2ë™ 1348 (ì¤‘ì•™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼2ë™ 1367 (ê´€ê³„ì§€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼2ë™ 1376 (ë²”ë¬¼ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼2ë™ 1382-1 (ì‚¼ì£¼ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 579-1 (ì²œë§ˆê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 580-2 (ì²­ì†”ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 586 (ì‹ ê¸°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 594-2 (ë™ì„œê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 595-2 (ë‘ì„±ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹ ë§¤ë™ 598 (ë‘ë¦¬ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹œì§€ë™ 137-5 (ê³ ì‚°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹œì§€ë™ 487 (ë‹¬ë¬´ë¦¬ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹œì§€ë™ 498-1 (ë¯¸ì§„ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‹œì§€ë™ 509-1 (ì „ì›ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§¤í˜¸ë™ 1329 (ì‚¼ê°ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§¤í˜¸ë™ 1333 (ë‚˜ë˜ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë§¤í˜¸ë™ 1330-2 (ëˆ„ë¦¬ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì‚¬ì›”ë™ 646 (ì‚¬ì›”1ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ì–´1ë™ 2293 (ë„ë‹´ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ íŒŒë™ 1012 (ìš©ë‘ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 59-5 (ë°±í•©ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 44 (ìƒë™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 43 (ë³´ëŒê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë‘ì‚°ë™ 149-11 (ë§‘ìŒê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 555-1 (ìƒë™ì œ1ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìƒë™ 555-2 (ìƒë™ì œ2ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ì¤‘ë™ 532-263 (ì¤‘ë™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ë²”ë¬¼ë™ 790-2 (ìš©ì§€ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ íŒŒë™ 1006 (íŒŒë™ê³µì›)",
  "ëŒ€êµ¬ ìˆ˜ì„±êµ¬ ìš±ìˆ˜ë™ 19-2 (ì‚¬ì›”ê³µì›)"

    ]
  };

  function searchLocation() {
    const category = document.querySelector('input[name="category"]:checked').value;
    const inputAddress = document.getElementById('address-input').value;

    geocoder.addressSearch(inputAddress, function(result, status) {
      if (status !== kakao.maps.services.Status.OK) {
        alert("ì£¼ì†Œë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.");
        return;
      }

      const userCoords = new kakao.maps.LatLng(result[0].y, result[0].x);
      map.setCenter(userCoords);

      if (userMarker) userMarker.setMap(null);
      userMarker = new kakao.maps.Marker({ map, position: userCoords, title: "ë‚´ ìœ„ì¹˜" });

      // ê¸°ì¡´ ë§ˆì»¤ ì œê±°
      markers.forEach(marker => marker.setMap(null));
      markers = [];

      const selectedList = infraData[category];
      let found = 0;

      selectedList.forEach(address => {
        geocoder.addressSearch(address, function(res, stat) {
          if (stat === kakao.maps.services.Status.OK) {
            const coords = new kakao.maps.LatLng(res[0].y, res[0].x);
            const distance = kakao.maps.geometry.spherical.computeDistanceBetween(userCoords, coords);

             if (distance <= 1000) {
          const marker = new kakao.maps.Marker({
            map,
            position: coords,
            title: address
          });
          markers.push(marker);

          const infowindow = new kakao.maps.InfoWindow({
            content: `<div style="padding:5px; font-size:14px;">${address}</div>`
          });

          kakao.maps.event.addListener(marker, 'mouseover', function() {
            infowindow.open(map, marker);
          });
          kakao.maps.event.addListener(marker, 'mouseout', function() {
            infowindow.close();
          });

          found++;
        }
      }); // <-- addressSearchì˜ ë‚´ë¶€ ì½œë°± ë‹«ìŒ
    });   // <-- forEach ë‹«ìŒ

    // ê²°ê³¼ í‘œì‹œ
    setTimeout(() => {
      document.getElementById('info').innerText =
        `ë°˜ê²½ 1km ë‚´ ${category === 'hospital' ? 'ë³‘ì›'
        : category === 'sports' ? 'ê³µê³µì²´ìœ¡ì‹œì„¤'
        : 'ê³µì› ë° ë…¹ì§€'}: ${found}ê³³`;
    }, 500);  // ë¹„ë™ê¸° ì²˜ë¦¬ ì§€ì—° ê³ ë ¤

  });  // <-- ì‚¬ìš©ìì˜ ì£¼ì†Œ ê²€ìƒ‰ í•¨ìˆ˜ ë‹«ìŒ
}
</script>

</body>
</html>
